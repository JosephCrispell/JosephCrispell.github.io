
<html>

    <head>
        <title>Joseph Crispell | Blog - spreadPoints</title>
        <link href="../../default.css" rel="stylesheet" type="text/css">

        <!-- Global site tag (gtag.js) - Google Analytics -->
        <script async src="https://www.googletagmanager.com/gtag/js?id=UA-109829558-1"></script>
        <script>
            window.dataLayer = window.dataLayer || [];
            function gtag(){dataLayer.push(arguments);}
            gtag('js', new Date());
            gtag('config', 'UA-109829558-1');
        </script>
    </head>

    <body>

        <!-- Insert Sidebar box -->
        <div id="sidebar" style="top: 43.5%">

            <pageLink><a href="../../index.html">Home</a></pageLink>
            <pageLink><a href="../../Blog.html">Blog</a></pageLink>
            <pageLink><a href="../../About.html">About</a></pageLink>
            <pageLink><a href="../../Outputs.html">Outputs</a></pageLink>
        </div>

        <!-- Insert Title -->
        <div id="title">
            <img src="../../BlogThumbnail.png" width="40%">

        </div>

        <!-- Insert Text Body -->
        <div id="mainText">

            <br><br><br>

            <h1>A quick post about my new R function: spreadPoints()&emsp;07-02-19</h1>

            <p>
                I've created a new <a href="https://www.r-project.org/">R</a> function called <c>spreadPoints</c>, in my <c>plotteR</c> package.<br><br>

                The <c>spreadPoints()</c> function is designed to add points onto an existing boxplot. The points are spread out to avoid overlap. Here it is at work in R:
            </p>

            <div id="codeBlock">

                # Install and load the devtools package<br>
                install.packages("devtools")<br>

                # Install and load the plotteR package<br>
                devtools::install_github("JosephCrispell/plotteR")<br>
                library(plotteR)<br><br>

                # Generate some example points - drawn from exponential distribution<br>
                values &lt;- rnorm(n=50)<br><br>
 
                # Plot a boxplot<br>
                boxplot(values, xlab="",  ylab="", frame=FALSE, las=1, pch=19)<br><br>
       
                # Plot the points spread along the X axis<br>
                spreadPoints(values, position=1, col="blue")<br><br>

            </div>

            <img src="SpreadPoints.png" width="75%" hspace="0.5%" vspace="1%">

            <p>
                You can create a very similar plot using the <c>stripchart()</c> function:
            </p>

            <div id="codeBlock">

                # Plot a boxplot<br>
                boxplot(values, xlab="",  ylab="", frame=FALSE, las=1, pch=19)<br><br>

                # Plot the points jittered along the X axis<br>
                stripchart(values, vertical=TRUE, jitter=0.2,<br>
                &emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;method="jitter", add=TRUE, pch=19, col="blue")<br>
            </div>                            

            <img src="Stripchart.png" width="75%" hspace="0.5%" vspace="1%">

            <p>
                You might wonder why I bothered creating <c>spreadPoints()</c> when <c>stripchart()</c> already existed? Mainly because I didn't like the random nature of <c>stipchart()</c>, which I find a little confusing sometimes. Also, it often moves points that don't need to be.<br><br>

                So now I've convinced you <c>spreadPoints()</c> is a useful function, here is how it works. For a given set of values, it will:
                <ol>
                    <li>Define equally sized (based on the estimated size of a point shape) on the Y axis</li>
                    <li>Assign each of the values provided to a bin</li>
                    <li>Examine each bin</li>
                    <ul>
                        <li>Count the values in the bin</li>
                        <li>Define the space that each point in this bin can take up (limited by width of box)</li>
                        <li>Give each value a position on the X axis working out from the middle in both the left and right directions</li>
                    </ul>
                    <li>Plot each value with their original Y and modified X coordinates</li>
                </ol>
            </p>
            <p>
                <c>spreadPoints()</c> will also work with a horizontal boxplots. Also, the <c>spreadPointsMultiple()</c>, part of the <c>spreadPoints</c> package, can be used to add points to a boxplot with multiple boxplots:
            </p>

            <div id="codeBlock">

                # Load the spreadPoints package<br>
                library(spreadPoints)<br><br>

                # Generate some example points - drawn from normal distribution and randomly assign them to categories<br>
                randomSamples &lt;- data.frame(<br>
                &emsp;&emsp;Values = rnorm(500),<br>
                &emsp;&emsp;Category = sample(c('A', 'B', 'C', 'D', 'E'), size=500, replace=TRUE))<br><br>
 
                # Plot a boxplot of the samples<br>
                boxplot(Values ~ Category, data = randomSamples, lwd = 2, frame=FALSE, las=1)<br><br>
 
                # Plot the points for each category spread along the X axis<br>
                spreadPointsMultiple(data=randomSamples, responseColumn="Values", categoriesColumn="Category", col="blue")<br><br>
            </div>

            <img src="SpreadPoints_Thumbnail.png" width="75%" hspace="0.5%" vspace="1%">

            <p>
                A pretty handy function for me at least, if you're interested in the code behind <c>spreadPoints()</c>, take a look in its <a href="https://github.com/JosephCrispell/plotteR/blob/master/R/spreadPoints.R">repository</a> on github.
            </p>

        </div>

    </body>

</html>
