
<html>

    <head>
        <title>Joseph Crispell | Blog - Multithreading</title>
        <link href="../../default.css" rel="stylesheet" type="text/css">

        <!-- Global site tag (gtag.js) - Google Analytics -->
        <script async src="https://www.googletagmanager.com/gtag/js?id=UA-109829558-1"></script>
        <script>
            window.dataLayer = window.dataLayer || [];
            function gtag(){dataLayer.push(arguments);}
            gtag('js', new Date());
            gtag('config', 'UA-109829558-1');
        </script>
    </head>

    <body>

        <!-- Insert Sidebar box -->
        <div id="sidebar" style="top: 43.5%">

            <pageLink><a href="../../index.html">Home</a></pageLink>
            <pageLink><a href="../../Blog.html">Blog</a></pageLink>
            <pageLink><a href="../../About.html">About</a></pageLink>
            <pageLink><a href="../../Outputs.html">Outputs</a></pageLink>
        </div>

        <!-- Insert Title -->
        <div id="title">
            <img src="../../BlogThumbnail.png" width="40%">

        </div>

        <!-- Insert Text Body -->
        <div id="mainText">

            <br><br><br>

            <h1>Multithreading in Java&emsp;04-05-18</h1>

            <p>
                Today I'm heading to Milan, Italy, to meet up with Joanna, who's been over there for the last couple of days for a meeting. To pass the time in the airport, I wrote this post about multithreading in Java.<br><br>

                Multithreading, as the name suggests, involves running multiple threads. A thread can be thought of as something that can run a single task. Multithreading is using multiple threads to complete multiple tasks in parrallel.<br><br>

                Up until last week I hadn't used any multithreading, but I got stuck trying to speed up some code and I thought it was time to learn. Also I build myself a new computer with 6 cores!<br><br>

                Multithreading in Java is amazingly well supported (although the code below looks pretty daunting) and it uses the <c>Thread</c> class. The <c>Thread</c> class, like any other Java class, can be modified (extended) to suit a particular task. Here, is a general class structure for a task to be completed in parallel:
            </p>

            <div id="codeBlock">

                // Create the class and give it a name<br>
                public class MyThread extends Thread{<br><br>

                &emsp;&emsp;// Initialise variables you want to be able to access throughout class here<br>
                &emsp;&emsp;public [TYPE] input;<br><br>

                &emsp;&emsp;// Define how the current class can be created<br>
                &emsp;&emsp;public MyThread(String name, [TYPE] input){<br><br>

                &emsp;&emsp;&emsp;&emsp;// Assign a name to the current thread - using the position<br>
                &emsp;&emsp;&emsp;&emsp;super(name);<br><br>

                &emsp;&emsp;&emsp;&emsp;// Store other inputs here<br>
                &emsp;&emsp;&emsp;&emsp;this.input = input;<br>
                &emsp;&emsp;}<br><br>

                &emsp;&emsp;// Define a run method - this will execute when thread started<br>
                &emsp;&emsp;public void run(){<br><br>

                &emsp;&emsp;&emsp;&emsp;// Complete your task here - using the inputs provided<br>
                &emsp;&emsp;&emsp;&emsp;...<br>
                &emsp;&emsp;}<br><br>

                &emsp;&emsp;// Create a method to retrieve whatever your task creates<br>
                &emsp;&emsp;public [TYPE] getInput(){<br>
                &emsp;&emsp;&emsp;&emsp;return this.input;<br>
                &emsp;&emsp;}<br>
                }

            </div>

            <p>
                Once you've created your <c>Thread</c> class, then you need conduct your multithreading. You'll need a different class, which might look something like this:
            </p>

            <div id="codeBlock">

                // Create the class and give it a name<br>
                public class MultiThreading{<br><br>

                &emsp;&emsp;// Define your main method - the place where you'll do the multithreading<br>
                &emsp;&emsp;public static void main(String[] args){<br><br>

                &emsp;&emsp;&emsp;&emsp;// Define the number of threads to be created (if more than number of<br>
                &emsp;&emsp;&emsp;&emsp;// threads available, Java will automatically queue)<br>
                &emsp;&emsp;&emsp;&emsp;int numberOfThreads = 10;<br><br>

                &emsp;&emsp;&emsp;&emsp;// Initialise an array to store each thread object<br>
                &emsp;&emsp;&emsp;&emsp;MyThread[] threads = new MyThread[numberOfThreads];<br><br>

                &emsp;&emsp;&emsp;&emsp;// Define inputs for the thread to work on here;<br>
                &emsp;&emsp;&emsp;&emsp;[TYPE] input = new [TYPE] ...;<br><br>

                &emsp;&emsp;&emsp;&emsp;// Create each thread<br>
                &emsp;&emsp;&emsp;&emsp;for(int i = 0; i &lt; numberOfThreads; i++){<br><br>

                &emsp;&emsp;&emsp;&emsp;&emsp;&emsp;// Create and start the current thread<br>
                &emsp;&emsp;&emsp;&emsp;&emsp;&emsp;threads[i] = new MyThread("thread-" + i, input);<br>
                &emsp;&emsp;&emsp;&emsp;&emsp;&emsp;threads[i].start();<br>
                &emsp;&emsp;&emsp;&emsp;}<br><br>

                &emsp;&emsp;&emsp;&emsp;// Check the threads are finished<br>
                &emsp;&emsp;&emsp;&emsp;waitUntilAllFinished(threads)<br><br>

                &emsp;&emsp;&emsp;&emsp;// Do something with the output from each thread<br>
                &emsp;&emsp;&emsp;&emsp;for(MyThread thread : threads){<br>
                &emsp;&emsp;&emsp;&emsp;&emsp;&emsp;...<br>
                &emsp;&emsp;&emsp;&emsp;}<br>
                &emsp;&emsp;}<br><br>

                &emsp;&emsp;//Define a method to check whether threads are finished<br>
                &emsp;&emsp;public static boolean finished(MyThread[] threads){<br><br>

                &emsp;&emsp;&emsp;&emsp;// Initialise a variable to record whether all finished<br>
                &emsp;&emsp;&emsp;&emsp;boolean finished = true;<br><br>

                &emsp;&emsp;&emsp;&emsp;// Examine each of the threads to see if any aren't finished<br>
                &emsp;&emsp;&emsp;&emsp;for(ExaminePosition thread : threads){<br><br>

                &emsp;&emsp;&emsp;&emsp;&emsp;&emsp;// Check if current thread finished<br>
                &emsp;&emsp;&emsp;&emsp;&emsp;&emsp;if(thread.isAlive() == true){<br><br>

                &emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;finished = false;<br>
                &emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;break;<br>
                &emsp;&emsp;&emsp;&emsp;&emsp;&emsp;}<br>
                &emsp;&emsp;&emsp;&emsp;}<br><br>

                &emsp;&emsp;&emsp;&emsp;return finished;<br>
                &emsp;&emsp;}<br><br>

                &emsp;&emsp;// Define a method to wait until threads finished<br>
                &emsp;&emsp;public static boolean waitUntilAllFinished(MyThread[] threads){<br><br>

                &emsp;&emsp;&emsp;&emsp;// Initialise a variable to record whether all threads finished<br>
                &emsp;&emsp;&emsp;&emsp;boolean allFinished = false;<br><br>

                &emsp;&emsp;&emsp;&emsp;// Keep checking the threads until they're all finished<br>
                &emsp;&emsp;&emsp;&emsp;while(allFinished == false){<br><br>

                &emsp;&emsp;&emsp;&emsp;&emsp;&emsp;// Check whether all threads finished<br>
                &emsp;&emsp;&emsp;&emsp;&emsp;&emsp;allFinished = finished(threads);<br>
                &emsp;&emsp;&emsp;&emsp;}<br>
                &emsp;&emsp;}<br>
                }
            </div>

            <p>
                The above class looks pretty long, but I've added in some extra functions to check and wait until threads are finished. The code
                I've given  is a skeleton for getting started with multithreading in Java. Thanks for reading, and good luck if you're going to be doing some multithreading of your own. I'm off to Milan!
            </p>

        </div>

    </body>

</html>
