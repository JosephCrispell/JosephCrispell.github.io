[
  
  {
    "title"    : "Getting started with Google Apps Script",
    "category" : "",
    "tags"     : " google, programming, javascript",
    "url"      : "/2020/06/20/google-scripts.html",
    "date"     : "June 20, 2020",
    "excerpt"  : "So I‚Äôve just started working with Google Apps Script.\n\n\n  Google Apps Script is a Javascript based programming language that seemlessly links to google docs.\n\n\nI‚Äôm creating a tool to update a googlesheet based on information entered into other goo...",
  "content"  : "So I‚Äôve just started working with Google Apps Script.\n\n\n  Google Apps Script is a Javascript based programming language that seemlessly links to google docs.\n\n\nI‚Äôm creating a tool to update a googlesheet based on information entered into other googlesheets - ideally it‚Äôll save some time as before the updates were done manually every day.\n\nI‚Äôm relatively new to Javascript and I am brand new to Google Apps Script. Thankfully there‚Äôs plenty of help online. For general Javascript help check out the following:\n\n  w3schools provides a huge amount of training materials\n  StackOverflow never fails to disappoint to answer every weird and wonderful question\n\n\nAnd Google has written some comprehensive documentation here. You find that Google has created objects and methods for all the Google linked tools (docs, googlesheets, calendar, mail, etc.).\n\nI‚Äôve created a DEMO workbook here. Here is a quick gif of it in action:\n\n\n\nHere are a few useful pieces of code I picked up during my work:\n\n// Open a workbook by URL\nvar workbook = SpreadsheetApp.getActive();\n\n// Open the attached workbook\nvar workbook = SpreadsheetApp.openByUrl();\n\n// Get a sheet by name\nvar sheet = workbook.getSheetByName(&quot;Sheet1&quot;);\n\n// Get values from sheet\nvar values = sheet.getRange(row, column, numRows, numColumns);\n\n// Change font colour of values in sheet\nsheet.getRange(row, column, numRows, numColumns).setFontColor(colour);\n\n\nThe main quirk to working with Google Apps Scripts is that there isn‚Äôt a terminal. Instead you can use the Logger.log(&quot;string&quot;) function to print to logs, which you can view by selecting ‚ÄúView‚Äù and then ‚Äúlogs‚Äù - this is surprisingly slow!! üòï The other solution, which I use in my demo above, is to print to a google document. Here, I print messages to a sheet within a googlesheets workbook:\n\nfunction printToLog(logSheet, string, colour=&quot;black&quot;) {\n  \n  // Get the number of rows in the log sheet\n  var nRows = logSheet.getLastRow();\n  \n  // Get the current time\n  var timeStamp = new Date();\n  \n  // Pring to log\n  logSheet.getRange(nRows+1, 1).setValue(timeStamp);\n  logSheet.getRange(nRows+1, 2).setValue(string).setFontColor(colour);\n}\n\n\nI‚Äôd recommend taking a look at my demo workbook, it is amazing how easy it is to create menus and attach functions! Also, because Google Apps Scripts is based on Javascript there are no limits to what you can do!!\n\n\n  Note that the demo is read only, so you‚Äôll need to make a cpoy before you can play around with it.\n\n\nLastly, get into the Google documentation, it is easy to search and well presented with great examples of how each function works. Enjoy! üòÄ\n"
} ,
  
  {
    "title"    : "Open Street Map tiles in R",
    "category" : "",
    "tags"     : " R, osm",
    "url"      : "/2019/07/20/openstreetmaps.html",
    "date"     : "July 20, 2019",
    "excerpt"  : "Recently I have been working with maps - trying to understand where all my samples are coming from. To do this I wanted to plot my sampling locations on top of a map. After fiddling with a number of different ways to get maps in R, I have happily ...",
  "content"  : "Recently I have been working with maps - trying to understand where all my samples are coming from. To do this I wanted to plot my sampling locations on top of a map. After fiddling with a number of different ways to get maps in R, I have happily fallen upon the OpenStreetMap package.\n\nA great package that can return a map in a variety of styles. Also, all the maps are open source and available to everyone for free!! Here is some code to get you started:\n\n# Load required libraries\nlibrary(OpenStreetMap) # I had to run sudo R CMD javareconf to get rJava to load\n\n# Note latitude and longitude of location\nupperLeft &amp;lt;- c(56.022457,-4.5969357)\nlowerRight &amp;lt;- c(56.014888,-4.5780147)\n\n# Get a satellite image of area of interest\nmap &amp;lt;- openmap(upperLeft=upperLeft,\n               lowerRight=lowerRight,\n               type=&quot;bing&quot;)\n\n# Plot the map\nplot(map)         \n\nYou‚Äôll get the following image - this is where Joanna and I got engaged! üíç On the shores of Loch Lomond, just outside Glasgow.\n\n\n\nUsing the type parameter of the openmap() function, you can change the style of the map being returned. The ‚Äúbing‚Äù option returns a satellite image of the map - my favourite!\n\nSometimes, if a particular area isn‚Äôt available in a certain style, you‚Äôll get an error something like this:\n\nError in osmtile(x%%nX, y, zoom, type) : could not obtain tile: ...\n\nYou can try different options for the type parameter to fix this issue. I quite like the &quot;opencyclemap&quot; option. Here is a great tutorial that you can a bit more help from. Enjoy!\n\nOne thing you‚Äôll have to get use to is hopping between different map projections (like latitude and longitudes, national grids, or spherical mercator projections). The openproj() is a handy function for converting between projections.\n\n"
} ,
  
  {
    "title"    : "Creating a progress bar in R",
    "category" : "",
    "tags"     : " R, progress, basicPlotteR",
    "url"      : "/2019/06/04/progress-bar.html",
    "date"     : "June 4, 2019",
    "excerpt"  : "We‚Äôve all been stuck waiting for a for loop to finish, or a particularly complex function. Over the years I have come across a few revelations when it comes to tracking the progress of my R code. Here they are in the order I found them!\n\n\n  The pr...",
  "content"  : "We‚Äôve all been stuck waiting for a for loop to finish, or a particularly complex function. Over the years I have come across a few revelations when it comes to tracking the progress of my R code. Here they are in the order I found them!\n\n\n  The print() function\n\n\nfor(i in 1:500){\n  \n  # Sleep for 0.1 seconds\n  Sys.sleep(0.01)\n  \n  # Print progress\n  print(paste(&quot;Finished&quot;, i, &quot;of&quot;, n))\n}  \n\n\n\n\n  The cat() function\n\n\nfor(i in 1:500){\n \n\t# Sleep for 0.1 seconds\n\tSys.sleep(0.01)\n  \n\t# Print progress\n\tcat(&quot;Finished&quot;, i, &quot;of&quot;, n, &quot;\\n&quot;)\n}\n\n\n\n\n  The modulus operator (%%)\n\n\nfor(i in 1:500){\n  \n\t# Sleep for 0.1 seconds\n\tSys.sleep(0.01)\n  \n\t# Print progress\n\tif(i %% 100 == 0){\n\t\tcat(&quot;Finished&quot;, i, &quot;of&quot;, n, &quot;\\n&quot;)\n\t}\n}\n\n\n\n\n  Overwriting a printed line using \\r\n\n\nfor(i in 1:500){\n  \n\t# Sleep for 0.1 seconds\n\tSys.sleep(0.01)\n  \n\t# Print progress\n\tcat(&quot;\\rFinished&quot;, i, &quot;of&quot;, n)\n}\n\n\n\n\n  My new progress() function üòä\n\n\nlibrary(basicPlotteR)\n\nfor(i in 1:500){\n  \n\t# Sleep for 0.1 seconds\n\tSys.sleep(0.01)\n  \n\t# Print progress\n\tprogress(i, n)\n}\n\n\n\n\n  R already has one!!!! üò±\n\n\n# Initialise a progress bar\npb &amp;lt;- txtProgressBar(min = 1, max = n, style = 3)\n\nfor(i in 1:500){\n  \n  # Sleep for 0.1 seconds\n  Sys.sleep(0.01)\n  \n  # Print progress\n  setTxtProgressBar(pb, i)\n}\nclose(pb)\n\n\n\nEach of the methods of monitoring your progress are useful in different situations. Whilst the last two options look great, they are only useful inside for loops. The \\r blew my mind and should work in most languages! The modulus (%%) is probably the one I use the most, allows me to check my progress without printing hundreds or thousands of lines to the screen.\n\nHere is more information about when and why to use the print() and cat() functions in R.\n\nAnyone who would like to use and see the code for my progress() function, you‚Äôll find it here on github. It is part of my basicPlotteR package.\n"
} ,
  
  {
    "title"    : "spreadPoints()",
    "category" : "",
    "tags"     : " R, package, plot, base, github",
    "url"      : "/2019/02/07/speadPoints.html",
    "date"     : "February 7, 2019",
    "excerpt"  : "I‚Äôve created a new R function called spreadPoints, in my basicPlotteR package.\n\nThe spreadPoints() function is designed to add points onto an existing boxplot. The points are spread out to avoid overlap. It works a lot like the stripchart, but it ...",
  "content"  : "I‚Äôve created a new R function called spreadPoints, in my basicPlotteR package.\n\nThe spreadPoints() function is designed to add points onto an existing boxplot. The points are spread out to avoid overlap. It works a lot like the stripchart, but it doesn‚Äôt spread points randomly. Here it is at work in R:\n\nThere is still work to be done on this function but give it a go and let me know what you think. You just need to download my basicPlotteR package:\n\n# Install the devtools package to install packages from GitHub\ninstall.packages(&quot;devtools&quot;)\n\n# Install my basicPLotteR package directly from GitHub\ndevtools::install_github(&quot;JosephCrispell/basicPlotteR&quot;)\n\n# Load it!\nlibrary(basicPlotteR)\n\n# Generate some example points - drawn from exponential distribution\nvalues &amp;lt;- rnorm(n=50)\n \n# Plot a boxplot\nboxplot(values, xlab=&quot;&quot;,  ylab=&quot;&quot;, frame=FALSE, las=1, pch=19)\n       \n# Plot the points spread along the X axis\nspreadPoints(values, position=1, col=&quot;blue&quot;)\n\n\n\n\nThe spreadPoints() function works with the following steps:\n\n  Split the Y axis into equally sized bins\n  Assign each Y point into a bin\n  Examine each Y axis bin:\n a. Count the points in current bin\n b. Split the X axis space available, to give the same amount of space to each point\n c. Working from the middle, work out left and right assigning each point a new Y coordinate\n  Plot the points with modified Y values\n\n\nWell hopefully that‚Äôs a helpful addition to the basicPlotteR package. Showing the underlying points on a boxplot is very important, particularly when there are only a few points available and I wanted a method that was non-random.\n\nStill plenty of work to do on this, so give it a go and let me knwo what you think! üòä\n"
} ,
  
  {
    "title"    : "Ben Vorlich hike",
    "category" : "",
    "tags"     : " hike",
    "url"      : "/2019/02/07/benVorlich.html",
    "date"     : "February 7, 2019",
    "excerpt"  : "A couple of weeks ago my good friend Steven McGee Callender planned a hiking trip in the Arrochar Alps. He managed to get me, Amy Thompson and Justin Purefoy to join him. We selected Ben Vorlich as an achievable goal for an inexperienced crew. We ...",
  "content"  : "A couple of weeks ago my good friend Steven McGee Callender planned a hiking trip in the Arrochar Alps. He managed to get me, Amy Thompson and Justin Purefoy to join him. We selected Ben Vorlich as an achievable goal for an inexperienced crew. We parked up on the North West edge of Loch Lomond and set off on the route described here.\n\nBrowser not compatible.\n\nDespite mixed opinions about whether we‚Äôd reach the top by the people we met along the way, we all made it. We enjoyed some spectacular views and deep snow.\n\n\n\n    \n        \n        Just about to head off!\n    \n\n    \n        \n        Spotted a frozen burst pipe\n    \n\n    \n        \n        On the steep section!\n    \n\n    \n        \n        Past the snow line!\n    \n\n    \n        \n        Deep snow!\n    \n\n    \n        \n        Testing Steven&#39;s photography\n    \n\n    \n        \n        Almost there!\n    \n\n    \n        \n        Made it!\n    \n\n    &amp;#10094;\n    &amp;#10095;\n\n\n\nLoads of amazing hikes around Loch Lomond to enjoy, check them out here) ‚õ∞Ô∏è\n"
} ,
  
  {
    "title"    : "Multi-threading in R",
    "category" : "",
    "tags"     : " R, programming, parallel",
    "url"      : "/2018/08/27/multi-threading-R.html",
    "date"     : "August 27, 2018",
    "excerpt"  : "Whilst I wait for a set of around sequences to be processed, I thought I would remind myself how to do multithreading in R.\n\nMultithreading basically means running multiple tasks at the same time. It is also called parallel programming. Most moder...",
  "content"  : "Whilst I wait for a set of around sequences to be processed, I thought I would remind myself how to do multithreading in R.\n\nMultithreading basically means running multiple tasks at the same time. It is also called parallel programming. Most modern computers come with multiple cores: dual-core, quad-core, etc‚Ä¶ Unfortunately, these cores aren‚Äôt often used, I especially don‚Äôt! üëÄ\n\nAny independent task that you have to do alot should be multithreaded. For example, today I‚Äôve randomly generated a large set of nucleotide sequences using this function:\n\ncreateRandomNucleotideAlignment &amp;lt;- function(n, length){\n\n  # Initialise a dataframe to store the sequences\n  sequences &amp;lt;- list()\n\n  # Create each sequence\n  for(i in 1:n){\n\n    # Randomly sample nucleotides to create a sequence of nucleotides\n    nucleotides &amp;lt;- sample(c(&#39;A&#39;, &#39;C&#39;, &#39;G&#39;, &#39;T&#39;), size=length, replace=TRUE)\n\n    # Collapse the vector of characters (nucleotides) into single string\n    sequences[[i]] &amp;lt;- paste(nucleotides, collapse=&quot;&quot;)\n  }\n\n  return(sequences)\n}\n\nThe above function samples from the nucleotides c(&#39;A&#39;, &#39;C&#39;, &#39;G&#39;, &#39;T&#39;) to generate a random sequence that is then stored in a list called sequences.\n\nMy task is to count the numbers of As, Cs, Gs, and Ts in each of a set of randomly generated sequences. Each sequence is independent and so the counting of the nucleotides in each could be done simultaneously.\n\nSo let‚Äôs get started with multithreading in R!\n\n# Load the parallel library\nlibrary(parallel)\n\n# Get the number of threads in the current machine\nnThreads &amp;lt;- detectCores()\n\n# Initialise the cluster of threads\nclusterOfThreads &amp;lt;- makeCluster(nThreads)\n\n# Register the cluster of threads\nregisterDoParallel(clusterOfThreads, cores=nThreads)\n\n\nThere is a little bit of set up! Firstly, I‚Äôm using the parallel, so that needs to be loaded. Then I used detectCores() function to find out how many threads I have on my computer (12). Then I use makeCluster() and registerDoParallel() to make and register my cluster of threads.\n\nNext I wrote a simple function that, given a sequence, will count the number of times each nucleotide is present:\n\n\ncalculateNucleotideFrequencies &amp;lt;- function(sequence){\n\n  # Initialise a list to store the nucleotide counts\n  frequencies &amp;lt;- list(&#39;A&#39;=0, &#39;C&#39;=0, &#39;G&#39;=0, &#39;T&#39;=0)\n\n  # Split the sequence into its nucleotides\n  nucleotides &amp;lt;- strsplit(sequence, split=&quot;&quot;)[[1]]\n\n  # Count the number of times each nucleotide appears in the given sequence\n  for(nucleotide in nucleotides){\n    frequencies[[nucleotide]] &amp;lt;- frequencies[[nucleotide]] + 1\n  }\n\n  return(frequencies)\n}\n\n\nWith the above function, the sequence is split back into nucleotides, and then each nucleotide is examined and the appropriate count is increased. I used a list to store the counts, so that I could each nucleotide as a key.\n\nSo we‚Äôve initialise our cluster and we‚Äôve got a couple of functions createRandomNucleotideAlignment() and calculateNucleotideFrequencies() to create and examine a set of sequences. So here‚Äôs how to count those nucleotides in parallel:\n\n# Create a random set of nucleotide sequences\nsequences &amp;lt;- createRandomNucleotideAlignment(300, 100000)\n\n# Use multiple threads to count how many times each nucleotide appears in each sequence\nfrequences &amp;lt;- clusterApply(cl=clusterOfThreads,\n                           x=sequences,\n                           fun=calculateNucleotideFrequencies)\n\n# REMEMBER to close the cluster of threads\nstopCluster(clusterOfThreads)\n\n\nThe clusterApply() function will automatically assign each of the sequences in sequences to a 100 threads, 12 of which will be run straight away and the rest will be queued. A list of nucleotide frequencies is returned, with each position corresponding the sequence in the same position of sequences.\n\nI spent ages trying to think of a good example to demonstrate the ability of multithreading, and I don‚Äôt really think I found one! Here, I created very large sequences and with these large sequenes it is faster to count the nucleotides on multiple threads.\n\nRegardless of the example, hopefully what I have demonstrated here is that multithreading in R is very easy and I should be doing it more often!! All of the above R code is available here.\n"
} ,
  
  {
    "title"    : "Building a computer",
    "category" : "",
    "tags"     : " building",
    "url"      : "/2018/05/09/building-computer.html",
    "date"     : "May 9, 2018",
    "excerpt"  : "I finally decided to upgrade my work computer and build a new one! After spending loads of time reading and comparing (mostly using pcpartpicker until I landed on the following parts, which I bought from komplett:\n\n\n  \n    \n      Source\n      Comp...",
  "content"  : "I finally decided to upgrade my work computer and build a new one! After spending loads of time reading and comparing (mostly using pcpartpicker until I landed on the following parts, which I bought from komplett:\n\n\n  \n    \n      Source\n      Component\n      Price\n    \n  \n  \n    \n      \n      16GB RAM card\n      ‚Ç¨169\n    \n    \n      \n      Computer case - mid-tower\n      ‚Ç¨44.90\n    \n    \n      \n      Power supply - 550watt\n      ‚Ç¨58\n    \n    \n      \n      AMD motherboard - Asus prime X370-PRO\n      ‚Ç¨139\n    \n    \n      \n      AMD processor - Ryzen 5 1600X\n      ‚Ç¨215\n    \n    \n      \n      Processor cooler\n      ‚Ç¨47.90\n    \n    \n      \n      3TB harddrive\n      ‚Ç¨103.94\n    \n    \n      \n      2GB Lenovo graphics card\n      -\n    \n  \n  \n    \n      ¬†\n      Total\n      ‚Ç¨777.74\n    \n  \n\n\nMy aim was to build a completely upgradable improvement to my current machine - a windows computer with 32GB of RAM, a i7-3770 quad-core processor and a 1TB harddrive that will continue to be used.\n\nBeing my first build, I made a blunder. I covered the processor and motherboard with thermal paste!! Note to self, with this cooler it is easier to attach it to its braces and then the braces to the motherboard! Aside from that, just a few plugs not in the right place.\n\nAfter working out how to attach the cooler and changing a couple of plugs, I am happy to say the new machine is running perfectly. It is extremely fast and I am looking forward to taking full advantage of its six cores!!! Here are some photos of the final build:\n\n\n  A quick note, almost two years later. I broke the motherboard (in transit I think), and got a replacement through warranty (thank you komplett!). This computer has worked amazingly and helped me out with some really interesting work at UCD. The photos below are of the re-build with the replacement motherboard. The case is a little dusty! üòÖ\n\n\n\n\n    \n        \n        The empty case\n    \n\n    \n        \n        Motherboard, straight out the box!\n    \n\n    \n        \n        Monster cooler! üòê\n    \n\n    \n        \n        Got the cooler on! üòÖ\n    \n\n    \n        \n        Good to go! üëç\n    \n\n    &amp;#10094;\n    &amp;#10095;\n\n\n"
} ,
  
  {
    "title"    : "Multi-threading in Java",
    "category" : "",
    "tags"     : " Java, programming, parallel",
    "url"      : "/2018/05/04/multi-threading-Java.html",
    "date"     : "May 4, 2018",
    "excerpt"  : "Today I‚Äôm heading to Milan, Italy, to meet up with Joanna, who‚Äôs been over there for the last couple of days for a meeting. To pass the time in the airport, I wrote this post about multithreading in Java.\n\nMultithreading, as the name suggests, inv...",
  "content"  : "Today I‚Äôm heading to Milan, Italy, to meet up with Joanna, who‚Äôs been over there for the last couple of days for a meeting. To pass the time in the airport, I wrote this post about multithreading in Java.\n\nMultithreading, as the name suggests, involves running multiple threads. A thread can be thought of as something that can run a single task. Multithreading is using multiple threads to complete multiple tasks in parrallel.\n\nUp until last week I hadn‚Äôt used any multithreading, but I got stuck trying to speed up some code and I thought it was time to learn. Also I built myself a new computer with 6 cores!\n\nMultithreading in Java is amazingly well supported (although the code below looks pretty daunting) and it uses the Thread class. The Thread class, like any other Java class, can be modified (extended) to suit a particular task. Here is a general class structure for a task to be completed in parallel:\n\n// Create the class and give it a name\npublic class MyThread extends Thread{\n\n  // Initialise variables you want to be able to access throughout class here\n  public [TYPE] input;\n\n  // Define how the current class can be created\n  public MyThread(String name, [TYPE] input){\n\n    // Assign a name to the current thread - using the position\n    super(name);\n\n    // Store other inputs here\n    this.input = input;\n  }\n\n  // Define a run method - this will execute when thread started\n  public void run(){\n\n    // Complete your task here - using the inputs provided\n    ...\n  }\n\n  // Create a method to retrieve whatever your task creates\n  public [TYPE] getInput(){\n    return this.input;\n  }\n}\n\n\nOnce you‚Äôve created your Thread class, then you need conduct your multithreading. You‚Äôll need a different class, which might look something like this:\n\n\n// Create the class and give it a name\npublic class MultiThreading{\n\n  // Define your main method - the place where you&#39;ll do the multithreading\n  public static void main(String[] args){\n\n    // Define the number of threads to be created (if more than number of\n    // threads available, Java will automatically queue)\n    int numberOfThreads = 4;\n\n    // Initialise an array to store each thread object\n    MyThread[] threads = new MyThread[numberOfThreads];\n\n    // Define inputs for the thread to work on here;\n    [TYPE] input = new [TYPE] ...;\n\n    // Create each thread\n    for(int i = 0; i &amp;amp;lt; numberOfThreads; i++){\n\n      // Create and start the current thread\n      threads[i] = new MyThread(&quot;thread-&quot; + i, input);\n      threads[i].start();\n    }\n\n    // Check the threads are finished\n    waitUntilAllFinished(threads)\n\n    // Do something with the output from each thread\n    for(MyThread thread : threads){\n      ...\n    }\n  }\n\n  // Define a method to check whether threads are finished\n  public static boolean finished(MyThread[] threads){\n\n    // Initialise a variable to record whether all finished\n    boolean finished = true;\n\n    // Examine each of the threads to see if any aren&#39;t finished\n    for(ExaminePosition thread : threads){\n\n      // Check if current thread finished\n      if(thread.isAlive() == true){\n\n        finished = false;\n        break;\n      }\n    }\n\n    return finished;\n  }\n\n  // Define a method to wait until threads finished\n  public static void waitUntilAllFinished(MyThread[] threads){\n\n    // Initialise a variable to record whether all threads finished\n    boolean allFinished = false;\n\n    // Keep checking the threads until they&#39;re all finished\n    while(allFinished == false){\n\n      // Check whether all threads finished\n      allFinished = finished(threads);\n    }\n  }\n}\n\n\nThe above class looks pretty long, but I‚Äôve added in some extra functions to check and wait until threads are finished. The code I‚Äôve given is a skeleton for getting started with multithreading in Java. Thanks for reading, and good luck if you‚Äôre going to be doing some multithreading of your own. I‚Äôm off to Milan!\n"
} ,
  
  {
    "title"    : "addTextLabels()",
    "category" : "",
    "tags"     : " R, package, plot, base, github",
    "url"      : "/2018/04/03/addTextLabels.html",
    "date"     : "April 3, 2018",
    "excerpt"  : "We‚Äôre frequently wanting to label points in our scatter plots but they almost always overlap! üò† Enter my addTextLabels() function.\n\naddTextLabels() is part of my basicPlotteR R package and allows you to add non-overlapping labels to points on a pl...",
  "content"  : "We‚Äôre frequently wanting to label points in our scatter plots but they almost always overlap! üò† Enter my addTextLabels() function.\n\naddTextLabels() is part of my basicPlotteR R package and allows you to add non-overlapping labels to points on a plot.\n\nThe gif below shows addTextLabels() in action and compares it to the base R  function\n\n\n\nTo create these plots, generate some random points with:\n\n\n    # Create some random points\n    n &amp;lt;- 45\n    testLabels &amp;lt;- c(&quot;short&quot;, &quot;mediummm&quot;, &quot;looooonnnnnnngggggg&quot;, &quot;0090292002&quot;, &quot;9&quot;, &quot;A Different label&quot;)\n    coords &amp;lt;- data.frame(X=runif(n), Y=runif(n, min=0, max=100), Name=sample(testLabels, size=n, replace=TRUE), stringsAsFactors = FALSE)\n\n\nThen you can remove the margins and set the background colour - only just figured out how to do this!! üéâ\n\n    # Set the margins\n    par(mar=c(0.5,0.5,0.5,0.5))\n\n    # Set the background colour\n    par(bg = rgb(0,0,1, 0.25))\n\nLastly, make the three plots:\n\n  Using the base R text() function\n  Using addTextLabels() without any formatting\n  A spruced up use of addTextLabels()\n\n\n    # With potentially overlapping labels\n    plot(x=coords$X, y=coords$Y, pch=19, bty=&quot;n&quot;, xaxt=&quot;n&quot;, yaxt=&quot;n&quot;, xlab=&quot;&quot;, ylab=&quot;&quot;, cex=2, col=rgb(1,0,0, 0.5))\n    text(coords$X, coords$Y, labels=coords$Name, xpd=TRUE, cex=2)\n\n    # Plot them with non-overlapping labels\n    plot(x=coords$X, y=coords$Y, pch=19, bty=&quot;n&quot;, xaxt=&quot;n&quot;, yaxt=&quot;n&quot;, xlab=&quot;&quot;, ylab=&quot;&quot;, cex=2, col=rgb(1,0,0, 0.5))\n    addTextLabels(coords$X, coords$Y, coords$Name, cex.label=2, col.label=&quot;black&quot;, lty=2, col.line=rgb(0,0,0, 0.5))\n\n    # Plot them with non-overlapping labels\n    plot(x=coords$X, y=coords$Y, pch=19, bty=&quot;n&quot;, xaxt=&quot;n&quot;, yaxt=&quot;n&quot;, xlab=&quot;&quot;, ylab=&quot;&quot;, cex=2, col=rgb(1,0,0, 0.5))\n    addTextLabels(coords$X, coords$Y, coords$Name, cex.label=2, col.background=rgb(0,0,0, 0.5), col.label=&quot;white&quot;, lty=2, col.line=rgb(0,0,0, 0.5))\n\n\nA method to avoid overlapping text labels already exists within the ggplot package (ggrepel), but I was keen to write my own that will work with base R plots.\n\nIt took me a wee while to get my method to work but the final version works with the following steps:\n\n\n  Create a plot that you want to label\n  Create a set of labels and coordinates to match points on plot\n  Create a set of alternative coordinates on a grid, within the limits of current plot (use par(&quot;usr&quot;) to get axis limits)\n  Remove alternative coordinates within the space designated for each point‚Äôs label (I used the strheight() and strwidth() functions for this)\n  Add labels to plot if they don‚Äôt overlap with any other point‚Äôs label.\n  If a label will overlap, search the laternative coordinates from closest to farthest, once found:\n    \n      Add a text label at the chosen location and plot a line back to the original point\n      Remove any of the alternative label locations that would overlap with the chosen location and its label\n      Change the point‚Äôs coordinates to be those of the alternative location\n    \n  \n\n\nThere is still work to be done on this function but give it a go and let me know what you think. You just need to download my basicPlotteR package:\n\n# Install the devtools package to install packages from GitHub\ninstall.packages(&quot;devtools&quot;)\n\n# Install my basicPLotteR package directly from GitHub\ndevtools::install_github(&quot;JosephCrispell/basicPlotteR&quot;)\n\n# Load it!\nlibrary(basicPlotteR)\n\n# Get cracking!!\n\n"
} ,
  
  {
    "title"    : "Creating a local BLAST database",
    "category" : "",
    "tags"     : " blast",
    "url"      : "/2017/08/03/blast.html",
    "date"     : "August 3, 2017",
    "excerpt"  : "BLAST is a powerful tool that can be used to compare genetic sequences. BLAST works by comparing a genetic sequence of nucleotides (A, C, G, and T) to a database of sequences.\n\nIn the UNIX environment BLAST can easily be installed using the follow...",
  "content"  : "BLAST is a powerful tool that can be used to compare genetic sequences. BLAST works by comparing a genetic sequence of nucleotides (A, C, G, and T) to a database of sequences.\n\nIn the UNIX environment BLAST can easily be installed using the following code:\n\n# Install BLAST\nsudo apt-get install ncbi-blast+\n\n\nOnce installed BLAST can be executed from the UNIX terminal. You can either compare your sequences to all the nucleotide data available in the online databases, using the following code:\n\n# Compare query sequences to online databases\nblastn -query querySequences.fasta -out blastOutput.txt -db nr -remote\n\n\nOr you can create a local database on your computer containing the sequences that you are interested in comparing your query sequences against, using the following code:\n\n# Make local database\nmakeblastdb -in databaseSequences.fasta -parse_seqids -dbtype nucl\n\n\nWith your local database created, you can compare your query sequences against it using the following code:\n\n# Compare sequences to local database\nblastn -query querySequences.fasta -out blastOutput.txt -db databaseSequences -outfmt 0\n\n"
} ,
  
  {
    "title"    : "Submitting FASTQ files to Sequence Read Archive (SRA)",
    "category" : "",
    "tags"     : " sra",
    "url"      : "/2017/04/06/sra.html",
    "date"     : "April 6, 2017",
    "excerpt"  : "FASTQ files are the files containing the raw sequencing data that are produced by Next Generation Sequencing platforms such as those made by Illumina. These files contain all the information produced by a sequencing run and are used in all downstr...",
  "content"  : "FASTQ files are the files containing the raw sequencing data that are produced by Next Generation Sequencing platforms such as those made by Illumina. These files contain all the information produced by a sequencing run and are used in all downstream analyses.\n\nAs there is a drive to make research accessible, making these FASTQ files publicly available is becoming increasingly common. Here I provide a short outline of how to go about uploading FASTQ files to the Sequence Read Archive.\n\nA more detailed description of this uploading process can be found here.\n\n\n  \n    Create an NCBI account here\n  \n  Initialise a Bioproject\n    \n      Go to the Bioproject page\n      Login to your NCBI account\n      Create a New Submission and fill in the required fields, leaving the Biosample field blank\n    \n  \n  Initialise a Biosample\n    \n      Go to the Biosample page\n      Download the batch submission template as a TSV (tab separated values) file and fill in the required fields\n      Create a New Submission and fill in the required fields, including uploading the TSV file\n      Wait for the submission to be accepted\n      Click on ‚ÄúDownload attributes file with BioSample accessions‚Äù to get the assigned accession numbers\n    \n  \n  Prepare metadata file for Sequence Read Archive submission\n    \n      Download a SRA_metadata_acc.xlsx file (I had to begin a SRA submission).\n      Fill in the required fields - using Bioproject number (PRJNA‚Ä¶) and Biosample accessions\n      You used to need the FASTQ file md5sum values (BUT I DIDN‚ÄôT FOR MY RECENT SUBMISSION)\n      You can get md5sum values using the following UNIX command: md5sum [fileName]\n      Create a Sequence Read Archive submission, if you haven‚Äôt already, and fill in the required fields\n      At this point you can upload the metadata file you created in step 4\n    \n  \n  Log onto SRA server\n    \n      If your files are &amp;lt;10GB and you have less than 300 of them, upload your FASTQ files via the web browser. This is so much easier! Or:\n      On the SRA page click on the FTP upload link\n      Note the server address, username, password and folder to navigate to\n      On a UNIX machine navigate to the folder containing (only) your FASTQ files\n      Log onto the server\n    \n  \n\n\nftp -i\nopen [server address]\n\n\n\n  Upload the FASTQ files\n    \n      Note that once logged into server directories are hidden - use full path to folder\n      Once in correct folder create new directory\n      Upload all FASTQ files\n    \n  \n\n\n# Navigate to server directory\ncd [path to folder]\n\n# Make a new directory to store FASTQ files in\nmkdir [new directory name]\ncd [new directory name]\n\n# Copy all FASTQ files into new directory\nmput *\n\n\n\n  Completing the Sequence Read Archive submission\n    \n      Go back to the Sequence Read Archive submission page\n      On the data uploading tab the folder you created to upload your FASTQ files into should exist.\n      Select this folder and click continue.\n      If no errors appear, it means all the FASTQ files were successfully linked to the metadata you provided and you can submit!\n    \n  \n\n\nTook me more than a few attempts to get this to work. If you run into any issues there is a dedicated NCBI team who are happy to help. Here are their emails:\n\n  bioprojecthelp@ncbi.nlm.nih.gov\n  biosamplehelp@ncbi.nlm.nih.gov\n  srahelp@ncbi.nlm.nih.gov\n\n"
} 
  
  ,
  
  {
  
  "title"    : "Possums, cows, and bovine tuberculosis in New Zealand",
  "category" : "",
  "tags"     : " New Zealand, genomics, bovine tuberculosis, PhD, research, Mycobacterium bovis, badgers, cattle",
  "url"      : "/projects/newzealand",
  "date"     : "February 16, 2017",
  "excerpt"  : "My first published research looked at bovine tubeculosis in cattle and widlife in New Zealand. Take a look at it here.\n\nWe used whole genome sequencing to trace the transmission of Mycobacterium bovis, a bacteria that causes bovine tuberculosis, b...",
  "content"  : "My first published research looked at bovine tubeculosis in cattle and widlife in New Zealand. Take a look at it here.\n\nWe used whole genome sequencing to trace the transmission of Mycobacterium bovis, a bacteria that causes bovine tuberculosis, between cattle and wildlife.\n\nIn New Zealand, the brushtail possum (see my impression below üò≥) is a pest species - originally imported for the fur industry. There are 30 million possums in New Zealand and they can be infected by the M. bovis bacteria. Their infection can spread into cattle, especially where cattle live close to the bush (dense forested areas), where possums live.\n\n\n\nOur research showed that the M. bovis bacteria was frequently being transmitted between cattle and wildlife populations in New Zealand. Given that there were less than 50 infected cattle herds in New Zealand at the time, this suggested that the possum population were acting as the main source of infection.\n\nFor me, this research was an amazing opportunity to work some incredible researchers in New Zealand - as well as meet them in person! Marian Price-Carter led this research project and continues to amazing work in the bovine tuberculosis program in New Zealand.\n\nHave a look at the research here and let me know what you think.\n"
  
} ,
  
  {
  
  "title"    : "homoplasyFinder",
  "category" : "",
  "tags"     : " homoplasyFinder, phylogenetics, bioinformatics, java, R, package",
  "url"      : "/projects/homoplasyfinder",
  "date"     : "January 21, 2019",
  "excerpt"  : "Firstly, what is a homoplasy? It is a trait (for example, a nucleotide at a position in an alignment) that is shared between tips that their immediate common ancestor doesn‚Äôt have.\n\nSee the left hand side of the figure below, there are tips with a...",
  "content"  : "Firstly, what is a homoplasy? It is a trait (for example, a nucleotide at a position in an alignment) that is shared between tips that their immediate common ancestor doesn‚Äôt have.\n\nSee the left hand side of the figure below, there are tips with a T (thymine) nucleotide that are surrounded by tips with an A (adenine).\n\n\n\nHomoplasies are interesting because they make sequences seem more similar than they evolutionarily are - complicating phylogenetic analyses.\n\nHomoplasies can also help us to understand evolution, perhaps there is a benefit to a particular mutation or trait. By identifying homoplasies, we can hone in our search to mutations causing antibiotic resistance, for example.\n\nFrom the right handside of the figure above, we can see how you can identify homoplasies. Read more about how HomoplasyFinder uses the consistency index to identify here.\n\nSoon after I moved to Dublin, I decided to build HomoplasyFinder. An R package that we can use to identify homoplasies on a phylogeny using a nucleotide alignment.\n\nAfter a quick look (I should have spent longer! üò≥), I couldn‚Äôt find a tool so I decided to created my own.\n\nI spent a bit of time trying to figure out how to make my tool so that it could automatically identify homoplasies and came up a pretty good solution (I thought!). So, I created the HomoplasyFinder tool and then spent much longer figuring out whether it worked!\n\nTo my surprise, it did work and, happy with my creation, I proceeded to create an R package and write an article. I submitted my article and month later all my hopes were dashed!\n\nThe article was rejected‚Ä¶ üò≠\n\nAfter a wee bit (a lot) of grumping, I realised that my manuscript was rejected for a very good reason. I hadn‚Äôt read about the consistency index - a beautifully simple method for identifying homoplasies that was defined in the 1970s (read the article). Well, I had read about it but I hadn‚Äôt understood it! The consistency index is a measure of how consistent each site in a set of genetic sequences is with a given phylogeny. The consistency index can be thought of as a measure of how homoplasious a site is\n\nI took a break from HomoplasyFinder, trying to bury this embarrassing affair.\n\nThen after a month or two, I decided to re-make HomoplasyFinder using the consistency index. I also had a thorough look for tools that could identify homoplasies and I found a few.\n\nUnsurprisingly, my new and improved HomoplasyFinder turned out to be much faster than my previous version and, surprisingly, it was also faster, after some improvements, than the tools I found that did the same thing! (This still worries me a little, maybe I am cheating in some way!)\n\nSo, with renewed hope, I updated my manuscript and submitted to a different journal. Following some very helpful reviewers comments it got published!! üéâ\n\nA year on and I am still doing a bit of work on HomoplasyFinder and hopefully I will continue to.\n\nGive it a go and let me know what you think!\n"
  
} ,
  
  {
  
  "title"    : "basicPlotteR",
  "category" : "",
  "tags"     : " plot, base, R, package",
  "url"      : "/projects/basicplotter",
  "date"     : "March 23, 2019",
  "excerpt"  : "basicPlotteR is an R package designed to help you making plots in base R. The base R package is the package that comes with R, it contains all those functions that makes R what it is.\n\nThere are loads of plotting functions available in the base R ...",
  "content"  : "basicPlotteR is an R package designed to help you making plots in base R. The base R package is the package that comes with R, it contains all those functions that makes R what it is.\n\nThere are loads of plotting functions available in the base R package. I try to use these as much as possible as I think they give me the most flexibility in how I create my plots. I designed basicPlotteR package to be a collection of additional plotting functions that add a little bit extra to the base plotting functions.\n\nI‚Äôll keep adding functions to basicPlotteR, for the moment though my favourite is addTextLabels(). It mimics the base R function text() by adding text labels to an existing plot, but it re-positions text to avoiding any overlapping.\n\n\n\nThere are loads more functions to play around with. Download the package and get started with the following code:\n\n# Install the devtools R package - for downloading packages from github\ninstall.packages(&quot;devtools&quot;)\n\n# Install basicPlotteR\ndevtools::install_github(&quot;JosephCrispell/basicPlotteR&quot;)\n\n# Load the basicPlotteR package\nlibrary(basicPlotteR)\n\n...\n\n\nTo learn more, take a look at the github page here.\n"
  
} ,
  
  {
  
  "title"    : "My teaching projects",
  "category" : "",
  "tags"     : " teaching",
  "url"      : "/projects/teaching",
  "date"     : "October 3, 2019",
  "excerpt"  : "Teaching data science is one of my passions. Here is where I am going to keep a note of the teaching materials that I‚Äôve developed.\n\nSo far, here‚Äôs the online materials that I‚Äôve created:\n\n\n  Pathogen Genomics Workshop - a workshop designed around...",
  "content"  : "Teaching data science is one of my passions. Here is where I am going to keep a note of the teaching materials that I‚Äôve developed.\n\nSo far, here‚Äôs the online materials that I‚Äôve created:\n\n\n  Pathogen Genomics Workshop - a workshop designed around an R package. I‚Äôm trying to introduce the topic of building phylogenetic trees in R.\n  An introduction to creating a Reproducible Analytical Pipeline (RAP). Well worth a look and built using the Rmarkdown ioslides presentation tool.\n  A quick tutorial about using the RMySQL R package. RMySQL is a cool package that allows you to interact with a local SQL server from within R.\n\n\nHopefully I‚Äôll continue adding to these materials. Let me know what you think!\n"
  
} ,
  
  {
  
  "title"    : "phyloHelpeR",
  "category" : "",
  "tags"     : " plot, base, R, package, phylogenetics",
  "url"      : "/projects/phylohelper",
  "date"     : "November 21, 2019",
  "excerpt"  : "I‚Äôve been working with phylogenies in R for a long time. I find the ape and phytools to be the most useful.\n\nThe phyloHelpeR is an R package to make a home for some of the functions I use a lot when building and plotting phylogenies in R. At the m...",
  "content"  : "I‚Äôve been working with phylogenies in R for a long time. I find the ape and phytools to be the most useful.\n\nThe phyloHelpeR is an R package to make a home for some of the functions I use a lot when building and plotting phylogenies in R. At the moment it is home to the following functions:\n\n\n  tanglePlot() a function to plot two phylogenies based on the same sequences opposite one another so you can see how they differ.\n  runRAXML() a function to interact with the command line phylogenetic tree building tool RAxML\n  addSNPScale() a function to add a scale to a phylogeny whos branch lengths are scaled to the number of Single Nucleotide Polymorphisms.\n\n\nAs you can see, this R package is a work in progress‚Ä¶ As I don‚Äôt work on phylogenetics anymore my contributions will be slow but hopefully I‚Äôll still add a few more helpful functions. üëç\n\n"
  
} ,
  
  {
  
  "title"    : "Badgers, cattle, and bovine tuberculosis in South West England",
  "category" : "",
  "tags"     : " genomics, bovine tuberculosis, PhD, research, Mycobacterium bovis, badgers, cattle",
  "url"      : "/projects/woodchester",
  "date"     : "December 16, 2019",
  "excerpt"  : "Today, after a huge amount of work over many years, our research using genomics to look at how often Mycobacterium bovis was transmitted within and between cattle and badgers in Woodchester Park has been published!\n\n\n  Mycobacterium bovis is a bac...",
  "content"  : "Today, after a huge amount of work over many years, our research using genomics to look at how often Mycobacterium bovis was transmitted within and between cattle and badgers in Woodchester Park has been published!\n\n\n  Mycobacterium bovis is a bacteria that infects cattle causing bovine tuberculosis. It costs the UK goverment tens of millions of pounds every year to control. It can infect many different species. In fact, in the UK, badger populations are can be infected and research has shown that infection can spread between cattle and badgers.\n\n\nTake a look at the article here! You can also read a nice summary in The Guardian.\n\nWoodchester Park, shown below, is a reserve in the south west of England. In this park there is a mixture of fertile farmland pasture, woodland and small ponds - the perfect place for a badger to live! ü¶°\n\n\n\nAround three hundred badgers live in Woodchester Park in small social groups of 5-12 individuals. There are also cattle that graze on the fields in and around the park.\n\nOur research used samples of Mycobacterium bovis bacteria from infected cattle and badgers living in and around Woodchester Park. We sequenced the genomes of these bacteria and  found that the badgers and cattle were infected with very similar strains of the bacteria, sometimes even the exact same strain! This meant that infection was being transmitted between the badgers and cattle, and it must have been happening quite frequently.\n\n\n  But who was giving it to whom?\n\n\nTo estimate how often infection was transmitted from cattle to badgers, and in the other direction, we used a tool called BASTA.\n\n\n\n\n  We found that badgers were transmitting infection to cattle more frequently. We also found that transmission between animals of the same species was more common. So cattle were more likely to infect other cattle and badgers other badgers, than cattle infect badgers or vice versa.\n\n\nOur research relied upon a very large collaboration between institutions across the United Kingdom and Republic of Ireland. The main institutions involved were:\n\n  University of Glasgow\n  University of Edinburgh\n  University College Dublin\n  Agri-Food and Biosciences Institute\n  Animal &amp;amp; Plant Health Agency\n\n\n\n  Our data was only from Woodchester Park, a small area in the South West of England. Without further research, we don‚Äôt know if what we found here is true elsewhere.\n\n\nTake a look at the paper! ü¶°üêÑü¶†üß¨\n\n"
  
} ,
  
  {
  
  "title"    : "Bovine TuBerculosis Genomics IrEland",
  "category" : "",
  "tags"     : " DAFM, grant, research, genomics, bovine tuberculosis, Mycobacterium bovis",
  "url"      : "/projects/btbgenie",
  "date"     : "March 1, 2020",
  "excerpt"  : "This time last year, Stephen Gordon and I were furiously writing a grant for funding from the Department of Agriculture, Food &amp; the Marine (DAFM) for their National Research Call.\n\nWe hoped to get funding to work towards integrating whole geno...",
  "content"  : "This time last year, Stephen Gordon and I were furiously writing a grant for funding from the Department of Agriculture, Food &amp;amp; the Marine (DAFM) for their National Research Call.\n\nWe hoped to get funding to work towards integrating whole genome sequencing into bovine tuberculosis surveillance in the Republic of Ireland.\n\nI came up with the acronym BTBGENIE: Bovine TuBcuolosis GENomics IrEland. üòä\n\nIn December, Steve and I found out our grant was successful and in March this year the project has begun. There were lots of interesting projects funding across all sorts of fields (read about them here).\n\nI‚Äôve now moved on from working at UCD but hopefully I‚Äôll still be involved.\n\nWe‚Äôll sequence the whole genome of Mycobacterium bovis, a bacteria that causes bovine tuberculosis, from infected cattle and wildlife. Then, by comparing these genomes we‚Äôll use there similarity to track transmission. More similar genomes, means there may have been a recent transmission event linking the animals.\n\nBy rolling out genome sequencing for bovine tuberculosis surveillance across Ireland, we‚Äôll hopefully be able to track the sources of infection in a herd more efficiently. Answering questions like:\n\n\n  Could the infection have come from wildlife living locally?\n  Has the herd been infected with this strain before?\n  Have any other herds in Ireland been infected with the same strain?\n\n\nBTBGENIE will be a team effort, with researchers from all over Ireland:\n\n\n  DAFM Central Veterinary Research Laboratory\n  Queen‚Äôs University Belfast\n  The Agri-Food and Biosciences Institute in Northern Ireland\n  University College Dublin\n\n\nKeep a look out for our latest research! üî≠\n"
  
} ,
  
  {
  
  "title"    : "Website",
  "category" : "",
  "tags"     : " website, jekyll, github pages",
  "url"      : "/projects/website",
  "date"     : "April 11, 2020",
  "excerpt"  : "My website is a place for me to take note of my interests, both inside and outside of work. I‚Äôll keep adding to, and improving, it!\n\nMost recently I‚Äôve re-designed my website, changing from a simple html and css structure to a more complex Jekyll ...",
  "content"  : "My website is a place for me to take note of my interests, both inside and outside of work. I‚Äôll keep adding to, and improving, it!\n\nMost recently I‚Äôve re-designed my website, changing from a simple html and css structure to a more complex Jekyll themed website. Jekyll still uses html and css, but it also does some clever automated steps behind the scenes to make blogging a little easier.\n\nTo build my new Jekyll based website, I chose a couple of Jekyll themes (from here) and spent a bit of time extracting the bits of these that I liked and combining them into my own. The two templates I used were:\n\n\n  The Type on Strap theme to give me the blogging template (posts, projects, tagging and searching)\n  And the particle theme for the (interactive!!) front page, which uses the amazing particle.js library.\n\n\nJekyll works really well with github pages, so I was able to branch my existing website repository and get to work on the new one. Take a look at the code here.\n\nI owe a lot of thanks to the documentation of the Type on Strap and particle themes, helping me to understand how a Jekyll page works. Nothing better than a well commented and structured piece of open-source code!! ‚ù§Ô∏è\n\nThe next project for this website is to clean up all the code, removing anything unnecessary for my website and then I plan on releasing it as a website template. There are so many cool templates out there, and maybe mine could be one of them! üòÄ\n\nTake a look around and let me know what you think.\n\n"
  
} 
  
]
